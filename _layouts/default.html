<!DOCTYPE html>
<html lang="en">

  {% include head.html %}

  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="{{ site.baseurl }}/" title="Home">{{ site.title }}</a>
          {% for page in site.pages_list %}
  &nbsp;&nbsp;&nbsp;
  <small><a href="{{ page[1]  }}">{{ page[0] }}</a></small>
{% endfor %}
         &nbsp;<div id="form"><input type=text id="email" placeholder="email@example.com" /><input type=submit onclick="subscribe()" id="submit" value="Keep me updated"></div>  
        </h3>
      </header>  
      <main>
        {{ content }}
        {% include comments.html %}
      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="{{ site.time | date_to_xmlschema }}">{{ site.time | date: '%Y' }}</time>. All rights reserved.
        </small>
      </footer>
    </div>


   <script>
    function subscribe()
    {
       var email = document.getElementById("email").value;
       if(!isValidEmail(email))
       {
          alert("Email address is not valid"); 
          return;
       }

       var subscriberList_ref = new Firebase("https://james-fm.firebaseio.com/subscribers");
       subscriberList_ref.push({'email': email});

       document.getElementById("form").innerHTML = "<small>Subscribed!</small>"
    }

    function isValidEmail(email)
    {
      var re = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
      return re.test(email);
    }
   </script>
  </body>
</html>
