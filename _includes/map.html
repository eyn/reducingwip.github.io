<div class="map" id="map"></div>

<script lang="text/javascript">
 
var map = L.map('map').setView([51.505, -0.09], 13);
L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

var gpxfiles = "{{ include.gpx }}".split (',');

for (var i = 0; i < gpxfiles.length; i++)
{

var url = "/public/gpx/"+gpxfiles[i]+".gpx";
new L.GPX(url, {async: true,
marker_options: {
    startIconUrl: '/public/img/pin-icon-start.png',
    endIconUrl: '/public/img/pin-icon-end.png',
    shadowUrl: '/public/img/pin-shadow.png'
  } }).on('loaded', function(e) {
                          map.fitBounds(e.target.getBounds());
      }).addTo(map);

}
</script>